(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{6031:function(e){function webpackEmptyAsyncContext(e){return Promise.resolve().then(function(){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s})}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=6031,e.exports=webpackEmptyAsyncContext},4016:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return components_AppShell}});var a=t(5893),i=t(8460),n=t(8535),l=t(166),r=t(7294),c=t(2261),o=t(9304),Intro_Landing=()=>{let e=(0,l.k6)(),s=[{headerText:"Let's start your ",highlightedHeaderText:"journey",contentText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In non turpis lectus. Aliquam fringilla, nunc sit amet consequat dignissim, nisi risus dapibus erat, quis vehicula..."},{headerText:"Build ",highlightedHeaderText:"new habits",contentText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In non turpis lectus. Aliquam fringilla, nunc sit amet consequat dignissim, nisi risus dapibus erat, quis vehicula..."},{headerText:"With an ",highlightedHeaderText:"accountability partner",contentText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In non turpis lectus. Aliquam fringilla, nunc sit amet consequat dignissim, nisi risus dapibus erat, quis vehicula..."},{headerText:"Start your ",highlightedHeaderText:"journey"}],handleSwiperChange=t=>{console.log(t),t==s.length-1&&setTimeout(()=>{e.push("/choose-character")},1e3)};return(0,a.jsx)(i._i,{children:(0,a.jsxs)(i.W2,{className:"intro-bg",children:[(0,a.jsx)(i.Xz,{className:"into-img",src:"/_next/static/media/main-bg.237b3b56.png"}),(0,a.jsx)(c.tq,{direction:"horizontal",modules:[o.tl],loop:!1,pagination:{clickable:!0},onSlideChange:e=>{handleSwiperChange(e.activeIndex)},children:s.map((e,s)=>(0,a.jsx)(c.o5,{children:(0,a.jsxs)("div",{className:"into-div",children:[(0,a.jsxs)("h1",{className:"h-20",children:[e.headerText,(0,a.jsx)("span",{className:"colored-text",children:e.highlightedHeaderText})]}),e.contentText?(0,a.jsx)(i.PM,{children:(0,a.jsx)(i.FN,{children:e.contentText})}):(0,a.jsx)(i.PQ,{name:"circular"})]})},s))})]})})},d=t(309),h=t(9196);let x=[{img:{src:"/_next/static/media/fox.b7ec1e3a.svg",height:240,width:218,blurWidth:0,blurHeight:0},name:"fox",text:{src:"/_next/static/media/fox-name.5078bac7.svg",height:31,width:156,blurWidth:0,blurHeight:0},info:"Fox Info Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent sed arcu hendrerit, eleifend nibh euismod, consequat libero. Fusce feugiat dui a sodales maximus. "},{img:{src:"/_next/static/media/raccoon.e0a13385.svg",height:248,width:225,blurWidth:0,blurHeight:0},name:"raccoon",text:{src:"/_next/static/media/raccoon-name.3c50a594.svg",height:71,width:156,blurWidth:0,blurHeight:0},info:"Raccoon Info Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent sed arcu hendrerit, eleifend nibh euismod, consequat libero. Fusce feugiat dui a sodales maximus. "},{img:{src:"/_next/static/media/aramdillo.e8025562.svg",height:238,width:217,blurWidth:0,blurHeight:0},name:"armadillo",text:{src:"/_next/static/media/aramdillo-name.2b408fa0.svg",height:81,width:200,blurWidth:0,blurHeight:0},info:"Armadillo Info Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent sed arcu hendrerit, eleifend nibh euismod, consequat libero. Fusce feugiat dui a sodales maximus. "}],m=[{name:"Exercise",description:"Go for a run or hit the gym",duration:30,selectDate:new Date,chosen:!1,available_durations:[7,14,30]},{name:"Read",description:"Read a book or an article",duration:7,selectDate:new Date,chosen:!1,available_durations:[7,14,30]},{name:"Meditate",description:"Practice mindfulness and meditation",duration:14,selectDate:new Date,chosen:!1,available_durations:[7,14,30]},{name:"Drink Water",description:"Stay hydrated throughout the day",duration:1,selectDate:new Date,chosen:!1,available_durations:[7,14,30]}];var u=t(4571);let j={isAuth:!1,username:"",email:"",token:"",avatar:x[0],alarm:{hours:0,minutes:0,meridiem:"am"},habits:[],groups:[]},g=new h.yh(j),setAvatar=e=>g.update(s=>({...s,avatar:e})),loginUser=e=>{let{username:s,token:t}=e;g.update(e=>{e.isAuth=!0,e.username=s,e.token=t})},logoutUser=()=>{g.update(e=>{e.isAuth=!1,e.username="",e.token=""})},setUserState=e=>g.update(s=>({...s,alarm:e}));async function initializeUserState(){console.log("Initializing user state");let e=await u.u.get({key:"userState"});if(console.log(e),e&&"string"==typeof e.value){let s=JSON.parse(e.value);g.update(e=>({...s}))}}g.createReaction(e=>e,e=>{u.u.set({key:"userState",value:JSON.stringify(e)})});var Intro_Alarm=()=>{var e;(0,l.k6)();let[s,t]=(0,r.useState)({hours:0,minutes:0,meridiem:"am"}),handleHourChange=e=>{console.log(e),t(s=>({...s,hours:e}))},handleMinuteChange=e=>{console.log(e),t(s=>({...s,minutes:e}))},handleMeridiemChange=e=>{let a=e?"am":"pm";t(e=>({...e,meridiem:a})),console.log(s)},n=(0,h.Kw)(g,e=>e.avatar),o=(0,i.cj)();return(0,a.jsx)(i._i,{children:(0,a.jsxs)(i.W2,{className:"char-bg content-div",children:[(0,a.jsxs)("div",{className:"flex p-2",children:[(0,a.jsx)(i.YG,{fill:"clear",routerDirection:"back",routerLink:"/choose-character",children:(0,a.jsx)(i.gu,{slot:"icon-only",icon:d.ZY4,className:"text-white"})}),(0,a.jsx)("h3",{className:"text-white font-bold text-base absolute left-1/2 -translate-x-1/2",children:"Wake Up Time"})]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsxs)(i.jY,{className:"w-full p-5 relative",children:[(0,a.jsxs)(i.Nd,{children:[(0,a.jsx)(i.wI,{children:(0,a.jsxs)(c.tq,{direction:"vertical",slidesPerView:3,freeMode:!0,className:"w-24 h-64",initialSlide:9,onSlideChange:e=>{handleHourChange(e.activeIndex)},children:[(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsx)("h1",{className:"font-bold text-7xl",children:" "})}),Array.from({length:12},(e,s)=>(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsxs)("h1",{className:"font-bold text-7xl",children:[" ",s<10?"0".concat(s):s]})},s)),(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsx)("h1",{className:"font-bold text-7xl",children:" "})})]})}),(0,a.jsx)(i.wI,{size:"auto",className:" flex justify-center items-center",children:(0,a.jsx)("h1",{className:"font-bold text-7xl pb-4",children:":"})}),(0,a.jsx)(i.wI,{children:(0,a.jsxs)(c.tq,{direction:"vertical",slidesPerView:3,freeMode:!0,className:"w-24 h-64",initialSlide:0,onSlideChange:e=>{handleMinuteChange(5*e.activeIndex)},children:[(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsx)("h1",{className:"font-bold text-7xl",children:" "})}),Array.from({length:12},(e,s)=>(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsxs)("h1",{className:"font-bold text-7xl",children:[" ",5*s<10?"0".concat(5*s):5*s]})},s)),(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsx)("h1",{className:"font-bold text-7xl",children:" "})})]})}),(0,a.jsx)(i.wI,{className:" flex justify-center items-center",children:(0,a.jsxs)(c.tq,{direction:"vertical",slidesPerView:3,freeMode:!0,className:"w-14 h-40",onSlideChange:e=>{handleMeridiemChange(e.activeIndex)},children:[(0,a.jsx)(c.o5,{style:{height:"50px"},children:(0,a.jsx)("h1",{className:"font-bold text-xl",children:" "})}),(0,a.jsx)(c.o5,{style:{height:"40px"},children:(0,a.jsx)("h1",{className:"font-bold text-3xl",children:"am"})}),(0,a.jsx)(c.o5,{style:{height:"40px"},children:(0,a.jsx)("h1",{className:"font-bold text-3xl",children:" pm"})}),(0,a.jsx)(c.o5,{style:{height:"50px"},children:(0,a.jsx)("h1",{className:"font-bold text-xl",children:" "})})]})})]}),(0,a.jsx)("span",{className:"clock-gradient-top"}),(0,a.jsx)("span",{className:"clock-gradient-bottom"})]})}),(0,a.jsx)(i.Xz,{src:null==n?void 0:null===(e=n.img)||void 0===e?void 0:e.src,className:"absolute z-10 char-img right-0 !-mt-14"}),(0,a.jsxs)("div",{className:"text-div",children:[(0,a.jsxs)("h1",{children:["When do you",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"colored-text",children:"wake up?"})]}),(0,a.jsx)("p",{children:"Lorem Ipsum Dolor Sit Amet, Ipsum Dolor Sit Ame"}),(0,a.jsx)(i.YG,{expand:"block",onClick:()=>{setUserState(s),o.push("/signup","forward","replace")},className:"white-background font-bold",children:(0,a.jsx)("p",{className:"text-lg",children:"DONE!"})})]})]})})},Intro_ChooseCharacter=()=>{console.log(x),(0,i.cj)(),(0,l.k6)();let[e,s]=(0,r.useState)(0),handleSwiperChange=e=>{s(e)};return(0,a.jsx)(i._i,{children:(0,a.jsxs)(i.W2,{className:"char-bg content-div",children:[(0,a.jsx)("div",{className:"flex p-2 h-20",children:(0,a.jsx)("h3",{className:"text-white font-bold text-base absolute left-1/2 -translate-x-1/2",children:"Choose a character"})}),(0,a.jsx)(c.tq,{modules:[o.tl,o.W_],pagination:{clickable:!0},onSlideChange:e=>{handleSwiperChange(e.activeIndex)},children:x.map((e,s)=>(0,a.jsx)(c.o5,{children:(0,a.jsxs)("div",{className:"char-container",children:[(0,a.jsx)(i.Xz,{src:e.img.src,className:"char-img"}),(0,a.jsx)(i.Xz,{src:e.text.src,className:"char-text"})]})},s))}),(0,a.jsxs)("div",{className:"text-div",children:[(0,a.jsxs)("h1",{children:["Choose your ",(0,a.jsx)("span",{className:"colored-text",children:"character"})]}),(0,a.jsx)("p",{children:x[e].info}),(0,a.jsx)(i.YG,{expand:"block",routerDirection:"forward",routerLink:"/alarm",onClick:()=>{setAvatar(x[e])},className:"white-background font-bold",children:(0,a.jsx)("p",{className:"text-lg",children:"NEXT"})})]})]})})},Auth_Signup=()=>{let e=(0,l.k6)(),[s,t]=(0,r.useState)(""),[n,c]=(0,r.useState)(""),[o,x]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[j,p]=(0,r.useState)(!1);(0,h.Kw)(g,e=>e.isAuth);let[b,f]=(0,r.useState)(!1),togglePasswordVisibility=()=>{f(!b)};return(0,a.jsx)(i._i,{children:(0,a.jsxs)(i.W2,{className:"sign-up-bg content-div",children:[(0,a.jsx)(i.Xz,{className:"bg-white",src:"/_next/static/media/bg-white.8d3debbd.png"}),(0,a.jsx)(i.YG,{className:"flex justify-between p-2",fill:"clear",onClick:()=>e.push("/signin"),children:(0,a.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,a.jsx)(i.gu,{icon:d.ZY4,className:"w-6 h-6 bg-primary "}),(0,a.jsx)("p",{className:"font-bold bg-color-primary ",children:"Sign In"})]})}),(0,a.jsxs)(i.jY,{children:[(0,a.jsx)(i.Nd,{children:(0,a.jsx)(i.wI,{children:(0,a.jsx)("h1",{className:"text-center text-black text-3xl",children:"Sign up"})})}),(0,a.jsxs)(i.Nd,{children:[(0,a.jsx)(i.wI,{children:(0,a.jsxs)(i.YG,{onClick:()=>{e.push("/character-select")},children:[(0,a.jsx)("span",{children:(0,a.jsx)(i.gu,{icon:d.Y_g,className:"w-6"})}),"with google"]})}),(0,a.jsx)(i.wI,{children:(0,a.jsx)(i.YG,{className:"bg-transparent",onClick:()=>{e.push("/signin")},children:(0,a.jsx)(i.gu,{icon:d.u_j,className:"w-6"})})}),(0,a.jsx)(i.wI,{children:(0,a.jsx)(i.YG,{className:"bg-transparent",onClick:()=>{e.push("/signin")},children:(0,a.jsx)(i.gu,{icon:d.Lzb,className:"w-6"})})})]}),(0,a.jsx)(i.Nd,{children:(0,a.jsx)(i.wI,{className:"text-base text-center text-zinc-400",children:"Or with Email"})}),(0,a.jsx)(i.Nd,{className:"p-0",children:(0,a.jsx)(i.wI,{children:(0,a.jsx)(i.pK,{className:"sign-input-fields",label:"Email",labelPlacement:"floating",placeholder:"Enter email"})})}),(0,a.jsx)(i.Nd,{children:(0,a.jsx)(i.wI,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.pK,{label:"Password",labelPlacement:"floating",type:b?"text":"password",placeholder:"Enter password",className:"sign-input-fields",value:n,onIonChange:e=>c(e.detail.value)}),(0,a.jsx)(i.YG,{fill:"clear",className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-10",onClick:togglePasswordVisibility,children:(0,a.jsx)(i.gu,{icon:b?d.qRO:d.hII})})]})})}),(0,a.jsx)(i.Nd,{children:(0,a.jsx)(i.wI,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.pK,{label:"Repeat Password",labelPlacement:"floating",type:b?"text":"password",placeholder:"Enter password",className:"sign-input-fields",value:n,onIonChange:e=>c(e.detail.value)}),(0,a.jsx)(i.YG,{fill:"clear",className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-10",onClick:togglePasswordVisibility,children:(0,a.jsx)(i.gu,{icon:b?d.qRO:d.hII})})]})})}),(0,a.jsx)(i.Nd,{children:(0,a.jsx)(i.wI,{children:(0,a.jsx)(i.YG,{className:"text-center bg-primary",expand:"block",onClick:()=>{e.push("/signin")},children:"Sign up"})})})]})]})})},p=t(842),b=t(7066),f=t(3454);b.Z.defaults.withCredentials=!1;let N=b.Z.create({withCredentials:!1,baseURL:f.env.REACT_APP_API||"http://192.168.10.117:5000"}),w=g.getRawState().token,onResponseError=async e=>{var s;let t=e.config;if((null===(s=e.response)||void 0===s?void 0:s.status)===403&&!t._retry){t._retry=!0;try{let e=g.getRawState().token;return w=e,t.headers?t.headers.Authorization="Bearer ".concat(e):t.headers={Authorization:"Bearer ".concat(e)},N(t)}catch(e){return Promise.reject(e)}}return Promise.reject(e)};N.interceptors.request.use(e=>((w=g.getRawState().token)&&(e.headers||(e.headers={}),N.defaults.headers.common.Authorization="Bearer ".concat(w),console.log("token init",w)),e),e=>Promise.reject(e)),N.interceptors.response.use(e=>{if("/register"===e.config.url||"/login"===e.config.url){let s=e.data.token;s&&(w=s,N.defaults.headers.common.Authorization="Bearer ".concat(s))}return e},onResponseError);let axios_request=e=>N(e).then(e=>e).catch(e=>{throw e}),loginRequest=async(e,s)=>axios_request({url:"/auth/login",method:"POST",data:{username:e,password:s}}),getHabits=async()=>axios_request({url:"/habits",method:"GET"}),initializeCommitment=async e=>{let{habit_id:s,intensity:t,duration:a,alarm_time:i}=e;return axios_request({url:"/user/commitments/initialize",method:"POST",data:{habit_id:s,intensity:t,duration:a,alarm_time:i}})},getCommitments=async()=>axios_request({url:"/user/commitments",method:"GET"}),getGroups=async()=>axios_request({url:"/user/group-chats",method:"GET"});var Signin=()=>{let[e,s]=(0,r.useState)({username:"",password:""}),[t,n]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[o,d]=(0,i.pv)(),[h,x]=(0,r.useState)(!1),m=(0,i.cj)(),handleInputChange=e=>{let{name:t,value:a}=e.target;s(e=>({...e,[t]:a}))},validateForm=()=>{let{username:s,password:t}=e;return s&&t?t.length<8?(n("Password must be at least 8 characters."),console.log("Validation failed: Password must be at least 8 characters."),!1):(n(""),!0):(n("All fields are required."),console.log("Validation failed: All fields are required."),!1)},handleSignIn=async s=>{if(validateForm()){s.preventDefault(),c(!0);try{let{username:s,password:t}=e;o({message:"Signing in...",duration:3e3});let a=await loginRequest(s,t);console.log(a),loginUser({username:s,token:a.data.token}),m.push("/","none","push")}catch(e){n("Username or password is incorrect")}finally{d(),c(!1)}}};return(0,r.useEffect)(()=>(p.N1.addListener("keyboardWillShow",()=>x(!0)),p.N1.addListener("keyboardWillHide",()=>x(!1)),()=>{p.N1.removeAllListeners()}),[]),(0,a.jsx)(i._i,{children:(0,a.jsxs)(i.W2,{className:"char-bg content-div",children:[(0,a.jsx)("div",{className:"flex justify-end p-2",children:(0,a.jsx)(i.YG,{fill:"clear",onClick:()=>m.push("/signup"),children:(0,a.jsx)("p",{className:"text-white font-bold",children:"Sign up"})})}),(0,a.jsxs)(i.jY,{children:[(0,a.jsx)(i.Nd,{children:(0,a.jsx)(i.wI,{children:(0,a.jsx)("h1",{children:"Sign In"})})}),(0,a.jsxs)(i.Nd,{children:[(0,a.jsx)(i.wI,{children:(0,a.jsx)(i.YG,{onClick:()=>{m.push("/character-select")},children:"G with google"})}),(0,a.jsx)(i.wI,{children:(0,a.jsx)(i.YG,{onClick:()=>{m.push("/signin")},children:"F"})}),(0,a.jsx)(i.wI,{children:(0,a.jsx)(i.YG,{onClick:()=>{m.push("/signin")},children:"T"})})]}),(0,a.jsx)(i.Nd,{children:(0,a.jsx)(i.wI,{children:"Or with Email"})}),(0,a.jsx)(i.Nd,{children:(0,a.jsxs)(i.wI,{children:[(0,a.jsx)(i.Q$,{className:"input-label",children:"Username"}),(0,a.jsx)(i.Ie,{lines:"none",className:"input-item",children:(0,a.jsx)(i.pK,{value:e.username,onInput:e=>handleInputChange(e),type:"text",name:"username",mode:"md",required:!0})})]})}),(0,a.jsx)(i.Nd,{children:(0,a.jsxs)(i.wI,{children:[(0,a.jsx)(i.Q$,{className:"input-label",children:"Password"}),(0,a.jsx)(i.Ie,{lines:"none",className:"input-item",children:(0,a.jsx)(i.pK,{value:e.password,onInput:e=>handleInputChange(e),type:"password",required:!0,name:"password",mode:"md"})})]})}),(0,a.jsx)(i.Nd,{children:(0,a.jsx)(i.wI,{children:(0,a.jsx)(i.YG,{expand:"block",className:"signin-button",onClick:handleSignIn,disabled:l,children:"Log In"})})})]})]})})},pages_Intro=()=>(0,a.jsxs)(i.jP,{children:[(0,a.jsx)(l.AW,{path:"/intro",render:()=>(0,a.jsx)(Intro_Landing,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/choose-character",render:()=>(0,a.jsx)(Intro_ChooseCharacter,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/alarm",render:()=>(0,a.jsx)(Intro_Alarm,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"",render:()=>(0,a.jsx)(l.l_,{to:"/intro"}),exact:!0}),(0,a.jsx)(l.AW,{path:"/signup",render:()=>(0,a.jsx)(Auth_Signup,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/signin",render:()=>(0,a.jsx)(Signin,{}),exact:!0})]}),ui_ToolBar=()=>(0,a.jsxs)("div",{className:"flex justify-between toolbar items-center",children:[(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(i.gu,{icon:d.eNp,style:{width:"30px",height:"30px"}}),(0,a.jsxs)("p",{className:"text-lg leading-4",children:["Smoke",(0,a.jsx)("br",{}),"Less"]})]}),(0,a.jsx)("div",{className:"text-lg",children:(0,a.jsxs)("p",{children:["DAY ",(0,a.jsx)("span",{className:"text-2xl",children:"1"}),"/21"]})}),(0,a.jsx)(i.gu,{icon:d.Xa5,style:{width:"30px",height:"30px"}})]}),pages_Home=()=>{let e=(0,h.Kw)(g,e=>e.avatar);return(0,a.jsxs)(i._i,{children:[(0,a.jsx)(i.Gu,{translucent:!0,className:"shadow-none",mode:"md",children:(0,a.jsx)(i.sr,{className:"transparent-bg ion-padding",children:(0,a.jsx)(ui_ToolBar,{})})}),(0,a.jsx)(i.W2,{className:"ion-padding",fullscreen:!0,children:(0,a.jsxs)("div",{className:"h-[75vh] flex flex-col justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-xl text-center",children:["Your ",(0,a.jsx)("br",{})," Journey"]}),(0,a.jsxs)("div",{className:"text-3xl text-center",children:["Meditate ",(0,a.jsx)("br",{})," for 5 minutes daily"]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between w-full",children:[(0,a.jsx)(i.Xz,{src:e.img.src,className:"w-36 -scale-x-100"}),(0,a.jsx)(i.Xz,{src:e.img.src,className:"w-36"})]}),(0,a.jsxs)("div",{className:"flex justify-between w-full text-2xl text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.gu,{icon:d.kVA}),(0,a.jsx)("p",{children:"nudge"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.gu,{icon:d.zRZ}),(0,a.jsx)("p",{children:"chat"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.gu,{icon:d.Dhl}),(0,a.jsx)("p",{children:"unmatch"})]})]})]})]})})]})};let y=new h.yh({safeAreaTop:0,safeAreaBottom:0,menuOpen:!1,notificationsOpen:!1,currentPage:null,lists:[{name:"Groceries",id:"01HRCYTYED31N83MJ0WK97WC02",items:[{name:"Apples"},{name:"Bananas"},{name:"Milk"},{name:"Ice Cream"}]},{name:"Hardware Store",id:"01HRCYV2KPNJQJ43Y7X526BHVX",items:[{name:"Circular Saw"},{name:"Tack Cloth"},{name:"Drywall"},{name:"Router"}]},{name:"Work",id:"01HRCYV6C3YWAJRF2ZE7AZ17K7",items:[{name:"TPS Report"},{name:"Set up email"}]},{name:"Reminders",id:"01HRCYVADRPCM5SYV5BH98C7HS",items:[{name:"Get car inspection",done:!0}]}],notifications:[{id:1,title:"New friend request",when:"6 hr"},{id:2,title:"Please change your password",when:"1 day"},{id:3,title:"You have a new message",when:"2 weeks"},{id:4,title:"Welcome to the app!",when:"1 month"}],settings:{enableNotifications:!0},selectedList:void 0,habits:m});async function initializeAppState(){console.log("Initializing app state");let e=await u.u.get({key:"appState"});if(console.log(e),e&&"string"==typeof e.value){var s;let t=JSON.parse(e.value);"object"==typeof t&&"number"==typeof(s=t).safeAreaTop&&"number"==typeof s.safeAreaBottom&&"boolean"==typeof s.menuOpen&&"boolean"==typeof s.notificationsOpen&&("number"==typeof s.currentPage||null===s.currentPage)&&Array.isArray(s.lists)&&Array.isArray(s.notifications)&&"object"==typeof s.settings&&("object"==typeof s.selectedList||void 0===s.selectedList)&&Array.isArray(s.habits)?y.update(e=>({...t})):console.error("Saved state is not valid")}try{let e=await getHabits();console.log("server habits",e),y.update(s=>{s.habits=e.data})}catch(e){console.log(e)}}y.createReaction(e=>e,e=>{u.u.set({key:"appState",value:JSON.stringify(e)})});let setSettings=e=>{y.update(s=>{s.settings=e})},setDone=(e,s,t)=>{y.update((a,i)=>{let n=i.lists.findIndex(s=>s===e),l=i.lists[n].items,r=null==l?void 0:l.findIndex(e=>e===s),c=null==l?void 0:l[null!=r?r:-1];c&&(c.done=t,e===i.selectedList&&(a.selectedList=a.lists[n]))})};var v=t(8697);let getState=e=>e;(0,v.P1)(getState,e=>e.homeItems);let k=(0,v.P1)(getState,e=>e.lists);(0,v.P1)(getState,e=>e.notifications);let S=(0,v.P1)(getState,e=>e.settings),ListItems=e=>{let{list:s}=e;return(0,a.jsx)(i.q_,{children:((null==s?void 0:s.items)||[]).map((e,t)=>(0,a.jsx)(ListItemEntry,{list:s,item:e},t))})},ListItemEntry=e=>{let{list:s,item:t}=e;return(0,a.jsxs)(i.Ie,{onClick:()=>setDone(s,t,!t.done),children:[(0,a.jsx)(i.Q$,{children:t.name}),(0,a.jsx)(i.nz,{"aria-label":t.name,checked:t.done||!1,slot:"end"})]})};var pages_ListDetail=()=>{let e=y.useState(k),s=(0,l.UO)(),{listId:t}=s,n=e.find(e=>e.id===t);return(0,a.jsxs)(i._i,{children:[(0,a.jsx)(i.Gu,{children:(0,a.jsxs)(i.sr,{children:[(0,a.jsx)(i.Sm,{slot:"start",children:(0,a.jsx)(i.oU,{defaultHref:"/lists"})}),(0,a.jsx)(i.wd,{children:null==n?void 0:n.name})]})}),(0,a.jsx)(i.W2,{children:n&&(0,a.jsx)(ListItems,{list:n})})]})},hooks_useAlerts=()=>{let[e]=(0,i.od)(),showErrorAlert=async()=>{await e({header:"Error!",subHeader:"Something went wrong.",buttons:[{text:"Cancel",role:"cancel",handler:()=>console.log("Alert canceled")},{text:"OK",role:"confirm",handler:()=>console.log("Alert confirmed")}]})},showLogoutAlert=async()=>{e({header:"Log Out",buttons:[{text:"Cancel",htmlAttributes:{"aria-label":"close"}},{text:"Log Out",htmlAttributes:{"aria-label":"logout"},handler:()=>{logoutUser()}}]})};return{showErrorAlert,showLogoutAlert}},pages_Settings=()=>{let{showLogoutAlert:e}=hooks_useAlerts(),handleLogout=()=>{e()},s=y.useState(S);return(0,a.jsxs)(i._i,{children:[(0,a.jsx)(i.Gu,{translucent:!0,className:"shadow-none",mode:"md",children:(0,a.jsx)(i.sr,{children:(0,a.jsx)(i.wd,{children:"Settings"})})}),(0,a.jsx)(i.W2,{children:(0,a.jsxs)(i.q_,{children:[(0,a.jsx)(i.Ie,{children:(0,a.jsx)(i.ho,{checked:s.enableNotifications,onIonChange:e=>{setSettings({...s,enableNotifications:e.target.checked})},children:"Enable Notifications"})}),(0,a.jsx)(i.Ie,{onClick:()=>handleLogout(),children:(0,a.jsx)("h5",{children:"Logout"})})]})})]})},ui_AlarmClock=e=>{let{alarm:s={hours:0,minutes:0,meridiem:"am"},setAlarm:t}=e,handleHourChange=e=>{console.log(e),t(s=>({...s,hours:e}))},handleMinuteChange=e=>{console.log(e),t(s=>({...s,minutes:e}))},handleMeridiemChange=e=>{let a=e?"am":"pm";t(e=>({...e,meridiem:a})),console.log(s)};return(0,a.jsx)("div",{className:"h-64",children:(0,a.jsxs)(i.jY,{className:"w-full p-5 relative",children:[(0,a.jsxs)(i.Nd,{children:[(0,a.jsx)(i.wI,{children:(0,a.jsxs)(c.tq,{direction:"vertical",slidesPerView:3,freeMode:!0,className:"w-24 h-64",initialSlide:s.hours,onSlideChange:e=>{handleHourChange(e.activeIndex)},children:[(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsx)("h1",{className:"font-bold text-7xl",children:" "})}),Array.from({length:12},(e,s)=>(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsxs)("h1",{className:"font-bold text-7xl",children:[" ",s<10?"0".concat(s):s]})},s)),(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsx)("h1",{className:"font-bold text-7xl",children:" "})})]})}),(0,a.jsx)(i.wI,{size:"auto",className:" flex justify-center items-center",children:(0,a.jsx)("h1",{className:"font-bold text-7xl pb-4",children:":"})}),(0,a.jsx)(i.wI,{children:(0,a.jsxs)(c.tq,{direction:"vertical",slidesPerView:3,freeMode:!0,className:"w-24 h-64",initialSlide:s.minutes,onSlideChange:e=>{handleMinuteChange(5*e.activeIndex)},children:[(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsx)("h1",{className:"font-bold text-7xl",children:" "})}),Array.from({length:12},(e,s)=>(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsxs)("h1",{className:"font-bold text-7xl",children:[" ",5*s<10?"0".concat(5*s):5*s]})},s)),(0,a.jsx)(c.o5,{style:{height:"80px"},children:(0,a.jsx)("h1",{className:"font-bold text-7xl",children:" "})})]})}),(0,a.jsx)(i.wI,{className:" flex justify-center items-center",children:(0,a.jsxs)(c.tq,{direction:"vertical",slidesPerView:3,freeMode:!0,className:"w-14 h-40",onSlideChange:e=>{handleMeridiemChange(e.activeIndex)},children:[(0,a.jsx)(c.o5,{style:{height:"50px"},children:(0,a.jsx)("h1",{className:"font-bold text-xl",children:" "})}),(0,a.jsx)(c.o5,{style:{height:"40px"},children:(0,a.jsx)("h1",{className:"font-bold text-3xl",children:"am"})}),(0,a.jsx)(c.o5,{style:{height:"40px"},children:(0,a.jsx)("h1",{className:"font-bold text-3xl",children:" pm"})}),(0,a.jsx)(c.o5,{style:{height:"50px"},children:(0,a.jsx)("h1",{className:"font-bold text-xl",children:" "})})]})})]}),(0,a.jsx)("span",{className:"clock-gradient-top"}),(0,a.jsx)("span",{className:"clock-gradient-bottom"})]})})},ui_IntensitySelect=e=>{let{intensity:s,setIntensity:t}=e,handleChange=e=>{t(s=1===e?"medium":2===e?"intense":"light"),console.log(s)};return(0,a.jsx)("div",{className:"h-40",children:(0,a.jsxs)(i.jY,{className:"w-full p-5 relative",children:[(0,a.jsx)(i.Nd,{children:(0,a.jsx)(i.wI,{className:" flex justify-center items-center",children:(0,a.jsxs)(c.tq,{direction:"vertical",slidesPerView:3,freeMode:!0,className:"w-full h-40",onSlideChange:e=>{handleChange(e.activeIndex)},children:[(0,a.jsx)(c.o5,{style:{height:"50px"},children:(0,a.jsx)("h1",{className:"font-bold text-xl",children:" "})}),(0,a.jsx)(c.o5,{style:{height:"40px"},children:(0,a.jsx)("h1",{className:"font-bold text-5xl",children:"Light"})}),(0,a.jsx)(c.o5,{style:{height:"40px"},children:(0,a.jsx)("h1",{className:"font-bold text-5xl",children:" Medium"})}),(0,a.jsx)(c.o5,{style:{height:"40px"},children:(0,a.jsx)("h1",{className:"font-bold text-5xl",children:" Intense"})}),(0,a.jsx)(c.o5,{style:{height:"50px"},children:(0,a.jsx)("h1",{className:"font-bold text-xl",children:" "})})]})})}),(0,a.jsx)("span",{className:"intensity-gradient-top"}),(0,a.jsx)("span",{className:"intensity-gradient-bottom"})]})})},Habits_DetailModal=e=>{let{open:s,onDidDismiss:t,habit:n}=e,[l,c]=(0,r.useState)(0),[o,h]=(0,r.useState)(""),x=g.useState(e=>e.alarm),[m,u]=(0,r.useState)({hours:0,minutes:0,meridiem:"am"}),handleSubmit=async()=>{if(n&&l&&o&&m){let e={habit_id:n.id||"",duration:l,intensity:o,alarm_time:("am"==m.meridiem?m.hours:m.hours+12)+":"+(m.minutes<10&&"0")+m.minutes+":00"};await initializeCommitment(e),t()}else console.log("All fields are required")};return(0,a.jsxs)(i.ki,{isOpen:s,onDidDismiss:t,children:[(0,a.jsx)(i.Gu,{className:"intro-bg",children:(0,a.jsxs)(i.sr,{children:[(0,a.jsx)(i.YG,{slot:"start",fill:"clear",color:"dark",onClick:t,children:(0,a.jsx)(i.gu,{icon:d.ZY4})}),(0,a.jsx)(i.wd,{children:null==n?void 0:n.name})]})}),(0,a.jsxs)(i.W2,{fullscreen:!0,className:"intro-bg",children:[(0,a.jsx)(i.Nd,{children:(null==n?void 0:n.available_durations)&&n.available_durations.map((e,s)=>(0,a.jsx)(i.YG,{onClick:()=>c(e),mode:"ios",className:"white-background min-w-[100px] font-bold ".concat(l===e?"selected-background":"white-background-opacity"),children:(0,a.jsxs)("p",{className:"colored-text text-xs",children:[e," DAYS"]})},s))}),(0,a.jsx)(ui_IntensitySelect,{intensity:o,setIntensity:h}),(0,a.jsx)(ui_AlarmClock,{alarm:x,setAlarm:u}),(0,a.jsx)(i.YG,{mode:"ios",className:"mt-20",shape:"round",expand:"full",onClick:handleSubmit,children:"Submit"})]})]})},Pick=()=>{let[e,s]=(0,r.useState)(!1),t=(0,l.k6)(),n=(0,h.Kw)(y,e=>e.habits),c=(0,h.Kw)(g,e=>e.avatar),o=(0,h.Kw)(g,e=>e.habits),[d,x]=(0,r.useState)([]),[m,u]=(0,r.useState)(void 0);(0,r.useEffect)(()=>{let updateExtendedHabits=()=>{let e=n.map(e=>({...e,chosen:o.some(s=>s.name===e.name)}));x(e)},e=g.subscribe(e=>e.habits,updateExtendedHabits);return updateExtendedHabits(),console.log(o),()=>e()},[o]);let handleHabitClick=e=>{if(e.chosen){console.log("habit already chosen");return}u(e),s(!0)};return(0,a.jsx)(i._i,{children:(0,a.jsxs)(i.W2,{className:"ion-padding intro-bg",fullscreen:!0,children:[(0,a.jsx)(i.sr,{className:"transparent-bg",children:(0,a.jsx)(i.wd,{children:"Pick a Habit"})}),(0,a.jsx)(i.jY,{children:(0,a.jsx)(i.Nd,{children:d.map((e,s)=>(0,a.jsx)(i.YG,{mode:"ios",onClick:()=>handleHabitClick(e),className:"white-background min-w-[100px] font-bold ".concat(e.chosen?"white-background":"white-background-opacity"),children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:e.name}),e.available_durations&&(0,a.jsxs)("p",{className:"colored-text text-xs",children:[e.available_durations[1]||e.available_durations[0]," DAYS"]})]})},s+e.name))})}),(0,a.jsx)("div",{className:"w-full border-t border-white"}),(0,a.jsx)("h2",{className:"text-center",children:"+ User Journeys"}),(0,a.jsx)(i.Xz,{src:c.img.src,className:"absolute z-10 char-img right-2 !bottom-40 w-48"}),(0,a.jsxs)("div",{className:"text-div content-div pb-14",children:[(0,a.jsxs)("h1",{children:["Pick a ",(0,a.jsx)("span",{className:"colored-text",children:"habit"}),(0,a.jsx)("br",{}),"or define new"]}),(0,a.jsx)("p",{children:"Lorem Ipsum Dolor Sit Amet, Ipsum Dolor Sit Ame"}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsx)(i.YG,{shape:"round",onClick:()=>{t.push("/")},className:"white-background font-bold px-12",children:(0,a.jsx)("p",{className:"text-lg mx-12",children:"NEXT"})})})]}),(0,a.jsx)(Habits_DetailModal,{open:e&&void 0!==m,onDidDismiss:()=>s(!1),habit:m})]})})},pages_Chats=()=>{let e=(0,h.Kw)(g,e=>e.avatar);return(0,a.jsxs)(i._i,{children:[(0,a.jsx)(i.Gu,{translucent:!0,className:"shadow-none",mode:"md",children:(0,a.jsx)(i.sr,{className:"transparent-bg ion-padding",children:(0,a.jsx)(ui_ToolBar,{})})}),(0,a.jsx)(i.W2,{fullscreen:!0,children:(0,a.jsxs)("div",{className:"bg-white w-4/5 mx-auto min-h-60 rounded-md relative mt-10 z-10 mb-36",children:[(0,a.jsxs)("div",{className:"chat-content",children:[(0,a.jsxs)("div",{className:"border-b-2 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"round",children:(0,a.jsx)(i.Xz,{className:"w-12 rounded-md",src:"/_next/static/media/max.4994d936.jpg"})}),(0,a.jsx)("p",{className:"text-black",children:"AngryRacoon34"})]}),(0,a.jsxs)("div",{className:"chat-body z-20 text-black p-4 space-y-2",children:[(0,a.jsx)("p",{className:"rounded-lg text-start max-w-xs",children:"hey achi"}),(0,a.jsx)("p",{className:"rounded-lg text-end max-w-xs",children:"hey bro"}),(0,a.jsx)("p",{className:"rounded-lg text-start max-w-xs",children:"es chatis tema idk rogor undaa"}),(0,a.jsx)("p",{className:"rounded-lg text-end max-w-xs",children:"me gaswavli daikide"}),(0,a.jsx)("p",{className:"rounded-lg text-start max-w-xs",children:"sps"}),(0,a.jsx)("p",{className:"rounded-lg text-start max-w-xs",children:"hey achi"}),(0,a.jsx)("p",{className:"rounded-lg text-end max-w-xs",children:"hey bro"}),(0,a.jsx)("p",{className:"rounded-lg text-start max-w-xs",children:"es chatis tema idk rogor undaa"}),(0,a.jsx)("p",{className:"rounded-lg text-end max-w-xs",children:"me gaswavli daikide"}),(0,a.jsx)("p",{className:"rounded-lg text-start max-w-xs",children:"sps"})]})]}),(0,a.jsx)("div",{className:"absolute bg-white bottom-[-5px] right-[50px] w-20 h-10 skew-y-12 z-[-1]"}),(0,a.jsx)(i.Xz,{src:e.img.src,className:"w-36 absolute bottom-[-9.5rem] right-[-20px]"})]})})]})},Fingerprint=()=>(0,a.jsx)("div",{children:"fp"}),pages_Tabs=()=>(0,a.jsxs)(i.UN,{children:[(0,a.jsxs)(i.jP,{children:[(0,a.jsx)(l.AW,{path:"/home",render:()=>(0,a.jsx)(pages_Home,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/habits/pick",render:()=>(0,a.jsx)(Pick,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/chats/:listId",render:()=>(0,a.jsx)(pages_ListDetail,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/chats",render:()=>(0,a.jsx)(pages_Chats,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/settings",render:()=>(0,a.jsx)(pages_Settings,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/fingerprint",render:()=>(0,a.jsx)(Fingerprint,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/signin",render:()=>(0,a.jsx)(Signin,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/signup",render:()=>(0,a.jsx)(Auth_Signup,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/intro/choosecharacter",render:()=>(0,a.jsx)(Intro_ChooseCharacter,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/intro/alarm",render:()=>(0,a.jsx)(Intro_Alarm,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"/intro/landing",render:()=>(0,a.jsx)(Intro_Landing,{}),exact:!0}),(0,a.jsx)(l.AW,{path:"",render:()=>(0,a.jsx)(l.l_,{to:"/home"}),exact:!0})]}),(0,a.jsxs)(i.yq,{slot:"bottom",color:"secondary",className:"h-20",children:[(0,a.jsxs)(i.ZU,{tab:"tab1",href:"/home",children:[(0,a.jsx)(i.gu,{icon:d.TSh}),(0,a.jsx)(i.Q$,{children:"Home"})]}),(0,a.jsxs)(i.ZU,{tab:"tab2",href:"/habits/pick",children:[(0,a.jsx)(i.gu,{icon:d.H0S}),(0,a.jsx)(i.Q$,{children:"Habits"})]}),(0,a.jsxs)(i.ZU,{tab:"tab3",href:"/fingerprint",children:[(0,a.jsx)("div",{className:"circle"}),(0,a.jsx)(i.gu,{icon:d.VI5,className:"z-20 absolute h-10 w-10 text-white"})]}),(0,a.jsxs)(i.ZU,{tab:"tab4",href:"/chats",children:[(0,a.jsx)(i.gu,{icon:d.JCQ}),(0,a.jsx)(i.Q$,{children:"Chats"})]}),(0,a.jsxs)(i.ZU,{tab:"tab5",href:"/settings",children:[(0,a.jsx)(i.gu,{icon:d.QJ7}),(0,a.jsx)(i.Q$,{children:"Settings"})]})]})]});(0,i.bg)({});let initUser=async()=>{let e=await getCommitments(),s=await getGroups();console.log("server group chats",s),console.log("server commitments",e)};var components_AppShell=()=>{let[e,s]=(0,r.useState)(!1),t=(0,h.Kw)(g,e=>""!==e.token);return((0,r.useEffect)(()=>{let init=async()=>{await initializeUserState(),await initializeAppState(),s(!0),console.log("initialized")};init()},[]),console.log(t),(0,r.useEffect)(()=>{t&&initUser()},[t]),e)?(0,a.jsx)(i.dr,{children:(0,a.jsx)(n.tr,{children:(0,a.jsx)(i.jP,{id:"main",children:t?(0,a.jsx)(l.AW,{path:"/",render:()=>(0,a.jsx)(pages_Tabs,{})}):(0,a.jsx)(l.AW,{path:"/",render:()=>(0,a.jsx)(pages_Intro,{})})})})}):(0,a.jsx)("div",{children:"Loading..."})}}}]);